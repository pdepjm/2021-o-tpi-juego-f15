import soundProducer.*
import NPCs.*
import jugador.*
import nivel.*
import wollok.game.*
import objetos.*
import direcciones.*
import paredes.*
import contador.*
import interactuables.*

describe "testsUwU" {
	
	const npc = new Civil(position = game.at(5,5))
	const remera = new Remera(position = game.at(5,5))
	const escotillaBanio = new Escotilla(position = game.at(10,10), identidad = "pared")
	const escotillaEstudio = new Escotilla(position = game.at(5,5), destino = escotillaBanio)
	const objetos = [jugador, npc, remera, escotillaEstudio, escotillaBanio]
	
	method initialize() { // test de polimorfismo
		jugador.position(game.at(5,5))
		todasLasParedes.cargar()
		//Visuales
		objetos.forEach({ aux => game.addVisual(aux) })
	}
	
	test "Movimiento jugador" {
		jugador.moverPara(izquierda)
		assert.equals(game.at(4,5), jugador.position())
	}
	
	test "Movimiento por escotilla" {
		jugador.interactuar()
		assert.equals(game.at(10,10), jugador.position())
	}
	
	test "Movimiento obstaculizado por pared" {
		jugador.position(game.at(1,1))
		jugador.moverPara(izquierda)
		assert.equals(game.at(1,1), jugador.position())
	}
	
	test "Matar NPC" {
		jugador.interactuar()
		assert.that(game.hasVisual(npc).negate())
	}
	
	test "Agarrar y usar objeto" {
		jugador.interactuar()
		jugador.usarObjeto()
		assert.equals("vestido", jugador.imageAux())
	}
}
